<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>아티스트 프로필 목록 페이지</title>
    <link rel="stylesheet" type="text/css" href="list.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="container">
    <h1>아티스트 프로필 목록</h1>
    <hr>

    <div id="artistList">
    </div>

    <div class="pagination" id="pagination">
    </div>

    <div class="search">
        <div class="label-container">
            <span>이름+내용</span>
            <div class="vertical-line"></div>
        </div>
        <div class="input-container">
            <input type="text" id="searchQuery">
        </div>
        <div class="icon-container" onclick="search()">
            <span class="material-icons">search</span>
            <div class="upload-button">Upload</div>
        </div>
    </div>
</div>



<script>
    const ITEMS_PER_PAGE = 5;

    function createProfileElement(artwork) {
        return (
            '<div class="profile">' +
            '<img src="' + artwork.imageUrl + '" class="profile-img" alt="Artwork ' + artwork.title + '">' +
            '<h3>' + artwork.title + '</h3>' +
            '</div>'
        );
    }

    function createPaginationElement(i, page) {
        if (i === page) {
            return '<span class="current-page">' + i + '</span>';
        } else {
            return '<span class="page-link" onclick="loadArtworks(' + i + ')">' + i + '</span>';
        }
    }

    function loadArtworks(page) {
        $.get(`http://tobiasdev.ml/services/artist/api/artists?page=${page}&size=${ITEMS_PER_PAGE}`, function(data, status, xhr) {
            $('#artistList').empty();
            data.forEach(function(artwork) {
                $('#artistList').append(createProfileElement(artwork));
            });

            var totalItems = xhr.getResponseHeader('X-Total-Count');
            var totalPages = Math.ceil(totalItems / ITEMS_PER_PAGE) - 1;

            $('#pagination').empty();
            for (var i = 1; i <= totalPages; i++) {
                $('#pagination').append(createPaginationElement(i, page));
            }
        });
    }

    loadArtworks(1);
</script>


</body>
</html>
